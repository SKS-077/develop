<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simon Says Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-image: url('https://i.imgur.com/75FQp2a.jpg'); /* Replace with your Roblox Simon Says image URL */
      background-size: cover;
      background-position: center;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      text-align: center;
    }

    #gameContainer {
      background-color: rgba(0, 0, 0, 0.6);
      border-radius: 10px;
      padding: 30px;
      width: 400px;
    }

    h1 {
      font-size: 36px;
      margin-bottom: 20px;
    }

    #scoreDisplay {
      font-size: 24px;
      margin-bottom: 20px;
    }

    .command {
      font-size: 24px;
      margin-bottom: 20px;
    }

    #startButton, #retryButton {
      background-color: #4CAF50;
      padding: 10px 20px;
      font-size: 18px;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    #retryButton {
      background-color: #f44336;
    }

    .hidden {
      display: none;
    }

    #gameOverMessage {
      font-size: 30px;
      color: red;
    }

    .colorButton {
      padding: 20px;
      font-size: 18px;
      margin: 10px;
      border-radius: 5px;
      cursor: pointer;
      border: none;
    }

    #red { background-color: red; }
    #blue { background-color: blue; }
    #green { background-color: green; }
    #yellow { background-color: yellow; }
    #jump { background-color: orange; }
    #clap { background-color: purple; }

  </style>
</head>
<body>
  <div id="gameContainer">
    <h1>Simon Says</h1>
    <div id="scoreDisplay">Score: 0</div>
    <p>Follow Simon's commands, but only if Simon says!</p>
    <div class="command" id="currentCommand"></div>
    <button id="startButton">Start Game</button>
    <p id="gameOverMessage" class="hidden">Game Over! You made a mistake!</p>
    <button id="retryButton" class="hidden">Retry</button>
  </div>

  <script>
    const startButton = document.getElementById("startButton");
    const retryButton = document.getElementById("retryButton");
    const currentCommand = document.getElementById("currentCommand");
    const gameOverMessage = document.getElementById("gameOverMessage");
    const scoreDisplay = document.getElementById("scoreDisplay");

    let sequence = [];
    let userSequence = [];
    let gameInProgress = false;
    let score = 0;
    let normalCommandTimeout; // Track timeout for normal command

    const commands = [
      "Simon says touch the red button",
      "Simon says touch the blue button",
      "Simon says touch the green button",
      "Simon says touch the yellow button",
      "Simon says jump",
      "Simon says clap",
      "Simon says tap your feet",
      "Simon says spin around",
      "Touch the red button",
      "Touch the blue button",
      "Touch the green button",
      "Touch the yellow button",
      "Jump",
      "Clap",
      "Tap your feet",
      "Spin around"
    ];

    startButton.addEventListener("click", startGame);
    retryButton.addEventListener("click", restartGame);

    function startGame() {
      sequence = [];
      userSequence = [];
      score = 0;
      gameInProgress = true;
      gameOverMessage.classList.add("hidden");
      retryButton.classList.add("hidden");
      startButton.classList.add("hidden");
      scoreDisplay.textContent = `Score: ${score}`;
      nextRound();
    }

    function restartGame() {
      gameOverMessage.classList.add("hidden");
      retryButton.classList.add("hidden");
      startButton.classList.remove("hidden");
      score = 0;
      scoreDisplay.textContent = `Score: ${score}`;
      sequence = [];
      userSequence = [];
      gameInProgress = false;
    }

    function nextRound() {
      userSequence = [];
      const randomCommand = getUniqueRandomCommand();
      sequence.push(randomCommand);
      showCommand(randomCommand);
      setTimeout(showButtons, 2000); // Wait before showing buttons for the user to interact
    }

    function getUniqueRandomCommand() {
      let randomCommand;
      do {
        randomCommand = commands[Math.floor(Math.random() * commands.length)];
      } while (sequence.includes(randomCommand)); // Ensures no repeat commands in the sequence
      return randomCommand;
    }

    function showCommand(command) {
      currentCommand.textContent = command;
      setTimeout(() => {
        currentCommand.textContent = "";
      }, 1500);
    }

    function showButtons() {
      // Reset the user options by removing any existing buttons
      const existingButtons = document.querySelectorAll('.colorButton');
      existingButtons.forEach(button => button.remove());

      // Create buttons for the user to click based on the command
      const userCommands = ["red", "blue", "green", "yellow", "jump", "clap", "tap", "spin"];
      userCommands.forEach(command => {
        const button = document.createElement("button");
        button.textContent = command.charAt(0).toUpperCase() + command.slice(1);
        button.classList.add("colorButton");
        button.id = command;
        button.addEventListener("click", () => checkUserChoice(command));
        document.body.appendChild(button);
      });
    }

    function checkUserChoice(command) {
      const correctCommand = sequence[userSequence.length];

      // If Simon says, validate the choice
      if (correctCommand.includes("Simon says")) {
        if (correctCommand === `Simon says touch the ${command} button` || correctCommand === `Simon says ${command}`) {
          userSequence.push(correctCommand);
          score += 10;  // Add 10 points for correct command
          scoreDisplay.textContent = `Score: ${score}`;
          
          if (userSequence.length === sequence.length) {
            setTimeout(nextRound, 1000);
          }
        } else {
          gameOver();
        }
      } else {
        // Normal command: Give the user 5 seconds and proceed if correct
        if (correctCommand === `Touch the ${command} button` || correctCommand === command) {
          score += 5; // Increment score for correct normal command
          scoreDisplay.textContent = `Score: ${score}`;
          setTimeout(nextRound, 5000); // Proceed to next round after 5 seconds
        } else {
          gameOver();
        }
      }
    }

    function gameOver() {
      gameInProgress = false;
      gameOverMessage.classList.remove("hidden");
      retryButton.classList.remove("hidden");
    }
  </script>
</body>
</html>
